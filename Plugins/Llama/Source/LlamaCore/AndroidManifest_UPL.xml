<?xml version="1.0" encoding="utf-8"?>
<root xmlns:android="http://schemas.android.com/apk/res/android">
	<androidManifestUpdates>
		<removePermission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>

		<loopElements tag="meta-data">
			<setStringFromAttribute  result="NameTagValue" tag="$" name="android:name"/>
			<setBoolIsEqual result="UseExternalFilesDirElement" arg1="$S(NameTagValue)" arg2="com.epicgames.unreal.GameActivity.bUseExternalFilesDir"/>
			<if condition="UseExternalFilesDirElement">
				<true>
					<removeElement tag="$"/>
				</true>
			</if>
		</loopElements>

		<addElements tag="manifest">
			<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" android:maxSdkVersion="31"/>
			<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" android:maxSdkVersion="31"/>
		</addElements>
	</androidManifestUpdates>
</root>